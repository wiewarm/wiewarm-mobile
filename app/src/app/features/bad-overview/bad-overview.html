<div class="item-viewport">
  <div class="bad-overview-header">
    <h1>Aktuelle Temperaturen</h1>

    @if (favorites().length) { @for (fav of favorites(); track fav.beckenid) {
    <article app-favorite-item [favorite]="fav"></article>
    } }

    <div class="search">
      <span class="search-emoji" aria-hidden="true">ğŸ”</span>
      <input
        type="text"
        [(ngModel)]="searchInput"
        placeholder="Sucheâ€¦"
        aria-label="Badi suchen"
      />
    </div>

    <div class="filter-sort">
      <a
        [appDialogTrigger]="sortDialog"
        class="sort-link"
        aria-controls="sort-dialog"
        aria-label="Sortieroptionen Ã¶ffnen"
        ><img
          [attr.src]="sortDirection() === 'asc' ? 'assets/img/up.png' : 'assets/img/down.png'"
          aria-hidden="true"
          alt
          width="17"
          height="16"
        />
        <span class="sort-text">{{ SORT_FIELDS[sortOption()] }}</span></a
      >
      <a
        [appDialogTrigger]="filterDialog"
        class="filter-link"
        aria-controls="filter-dialog"
        aria-label="Filteroptionen Ã¶ffnen"
      >
        <span class="filter-text">{{ FILTER_FIELDS[filterOption()] }}</span>
        <app-icon class="gradient-icon" symbolId="#filter_list" />
      </a>
    </div>
  </div>

  <dialog
    app-sort-dialog
    #sortDialog
    [sortField]="sortOption()"
    [sortDirection]="sortDirection()"
    (setSort)="setSort($event.field, $event.direction)"
  ></dialog>
  <dialog
    app-filter-dialog
    #filterDialog
    [filterField]="filterOption()"
    (setFilter)="setFilter($event)"
  ></dialog>

  <app-loading-error
    [state]="badResource.isLoading() ? 'loading':badResource.error() ? 'error' : 'idle' "
  ></app-loading-error>

  <span class="accordion" cdkAccordion>
    @for (item of filteredItems(); track item.beckenid; let i = $index) {
    <app-bad-item [item]="item" [index]="i"></app-bad-item>
    } @if ( !badResource.isLoading() && !badResource.error() &&
    filteredItems().length === 0 ) {
    <div class="status" role="status">
      <span aria-hidden="true">ğŸ˜•</span>
      <p>Keine Resultate gefunden.</p>
    </div>
    }
  </span>
</div>
